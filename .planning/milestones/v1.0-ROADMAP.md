# Archived Roadmap: Claude Terminal v1.0 — UX Fixes

**Milestone:** v1.0
**Timeline:** 2026-02-24 → 2026-02-27 (4 days)
**Status:** Complete
**Commits:** 268 | **Files changed:** 408 | **Lines:** +68,920 / -3,794

## Key Accomplishments

1. **Terminal Keyboard Shortcuts** — Full Windows-native terminal shortcuts (Ctrl+C copy, Ctrl+V paste, Ctrl+Arrow word-jump, right-click paste, Ctrl+Tab switching) with configurable settings
2. **Session Persistence & Resume** — Terminal tabs, Claude sessions, explorer state, active tab, and window state all persist across restarts with crash-resilient continuous saves
3. **File Explorer Enhancements** — Dotfile visibility toggle, natural sorting, file watcher (chokidar) for live filesystem updates, scroll position persistence
4. **Integrated Markdown Viewer** — Renders .md files as preview tabs with TOC, live reload, Ctrl+F search, source/rendered toggle
5. **Tab Management** — AI tab naming toggle, slash-command rename, tab name persistence, resume dialog with saved names, browser-like tab close history
6. **Polish & Stability** — Taskbar pin preservation on update, window title tracking, .NET dashboard support, shift+return race condition fix

## Deferred

- **Phase 15**: Remember Projects panel width across restarts (unplanned)
- **Phase 15.1**: Remember Notification State across restarts (unplanned)

## Phases

### Phase 1: Dotfile Visibility
**Goal**: Remove the dotfile filter from both code paths in FileExplorer.js so all hidden files appear in tree and search
**Requirements**: FILE-01, FILE-02
**Plans:** 1/1 complete
- 01-01-PLAN.md — Remove dotfile filter from readDirectoryAsync and collectAllFiles in FileExplorer.js

### Phase 1.1: Dotfile Visibility Setting (INSERTED)
**Goal:** Users can toggle dotfile/dotfolder visibility in the file explorer via a setting in General settings, defaulting to visible
**Requirements:** FILE-01, FILE-02
**Plans:** 1/1 complete
- 1.1-01-PLAN.md — Add showDotfiles setting, Explorer toggle in General settings, dotfile filter in FileExplorer tree and search paths

### Phase 2: Terminal Keyboard Shortcuts
**Goal**: Wire Ctrl+C copy, Ctrl+V paste, right-click paste, and Ctrl+Arrow word-jump into xterm.js; remap tab-switching to Ctrl+Tab
**Requirements**: TERM-01, TERM-02, TERM-03, TERM-04, TERM-05
**Plans:** 3/3 complete
- 02-01-PLAN.md — Remap tab-switching from Ctrl+Arrow to Ctrl+Tab/Ctrl+Shift+Tab
- 02-02-PLAN.md — Add Ctrl+C copy, Ctrl+V paste, and Ctrl+Arrow word-jump
- 02-03-PLAN.md — Add right-click paste via contextmenu listener

### Phase 2.1: Fix PR #13 Review Issues (INSERTED)
**Goal:** Flatten nested terminalShortcuts settings, restore Ctrl+Left/Right bypass, rebase
**Requirements:** TERM-01, TERM-03, TERM-04, TERM-05, TERM-V2-01
**Plans:** 2/2 complete
- 2.1-01-PLAN.md — Flatten nested settings to flat shortcutXxx keys
- 2.1-02-PLAN.md — Restore Windows Snap bypass with word-jump IPC chain

### Phase 3: New Terminal Button
**Goal**: Add a visible "+" button above the tab strip for creating new terminals
**Requirements**: TMGR-01
**Plans:** 1/1 complete
- 03-01-PLAN.md — Add button HTML/CSS and wire click handler

### Phase 4: Session Persistence
**Goal:** Terminal tabs persist across app restarts with working directories and last-opened project
**Requirements:** SESS-01, SESS-02, SESS-03, SESS-04
**Plans:** 2/2 complete
- 04-01-PLAN.md — Create TerminalSessionService and wire save hooks
- 04-02-PLAN.md — Wire restore at startup, last-opened-project tracking, deletion cleanup

### Phase 5: Remember Explorer State
**Goal:** File explorer expanded folders and panel visibility persist per-project
**Requirements:** EXPL-01, EXPL-02, EXPL-03, EXPL-04
**Plans:** 2/2 complete
- 05-01-PLAN.md — Add getState/restoreState to FileExplorer, extend TerminalSessionService
- 05-02-PLAN.md — Wire restore into project-switch subscriber

### Phase 5.1: Explorer State Cold-Start & Scroll Position (INSERTED)
**Goal:** Explorer state survives cold starts and scroll position is persisted per-project
**Requirements:** EXPL-01, EXPL-03
**Plans:** 2/2 complete
- 5.1-01-PLAN.md — Fix cold-start overwrite guard, add scrollTop persistence
- 5.1-02-PLAN.md — Wire skip guard around startup restore, add flush to quit handlers

### Phase 6: Resume Claude Sessions After Restart
**Goal:** Persist Claude session IDs for `claude --resume` after restart
**Requirements:** SESS-01, SESS-02, SESS-03, SESS-04
**Plans:** 3/3 complete
- 06-01-PLAN.md — Capture session IDs from hooks, persist in TerminalSessionService
- 06-02-PLAN.md — Thread resumeSessionId through createTerminal and restore loop
- 06-03-PLAN.md — Gap closure: forward resumeSessionId in chat mode, save/restore tab mode

### Phase 6.1: Bugfix — Session ID After /clear (INSERTED)
**Goal:** Fix session ID staleness after /clear with last-active-tab tracking
**Plans:** 1/1 complete
- 6.1-01-PLAN.md — Export saveTerminalSessionsImmediate, add last-active-tab tracking

### Phase 6.2: Scroll to End on Session Resume (INSERTED)
**Goal:** All restored terminal tabs scroll to bottom after restart
**Requirements:** SESS-01
**Plans:** 2/2 complete
- 6.2-01-PLAN.md — Post-restore scroll-all loop and loading→ready hook
- 6.2-02-PLAN.md — Silence-based PTY detection replacing fixed timeout

### Phase 6.3: Remember Active Tab per Project (INSERTED)
**Goal:** Persist active terminal tab per project for restore on swap/restart
**Requirements:** SESS-01, SESS-02
**Plans:** 1/1 complete
- 6.3-01-PLAN.md — Persist activeTabIndex and restore in filterByProject

### Phase 6.4: Bugfix — Session ID Not Persisted (INSERTED)
**Goal:** Fix claudeSessionId not being persisted on termData at creation and after /clear
**Plans:** 2/2 complete
- 6.4-01-PLAN.md — Add claudeSessionId and cwd to termData in createTerminal
- 6.4-02-PLAN.md — Propagate SDK session ID from ChatView to termData

### Phase 7: Settings for Hotkeys
**Goal:** Configurable terminal keyboard shortcuts from Settings panel
**Requirements:** TERM-V2-01
**Plans:** 2/2 complete
- 7-01-PLAN.md — Terminal shortcut settings, UI toggles, rightClickCopyPaste
- 7-02-PLAN.md — Ctrl+Tab enable/disable IPC chain

### Phase 7.1: Fix Hotkeys Settings Toggles (INSERTED)
**Goal:** Fix CSS class mismatch for terminal shortcut toggle switches
**Plans:** 1/1 complete
- 7.1-01-PLAN.md — Fix terminal-shortcut-toggle to toggle-option class

### Phase 8: App Title = Current Project
**Goal:** Window title reflects currently selected project name
**Requirements:** TITLE-01, TITLE-02
**Plans:** 1/1 complete
- 8-01-PLAN.md — Add setting, toggle UI, i18n, projectsState subscriber

### Phase 9: Remember Window State
**Goal:** Window position, size, and maximized state persist across restarts
**Requirements:** WIN-01, WIN-02, WIN-03
**Plans:** 1/1 complete
- 9-01-PLAN.md — Window state persistence with multi-monitor support

### Phase 10: Tab Renaming
**Goal:** Terminal tabs auto-rename to last slash command when opt-in setting enabled
**Requirements:** TAB-RENAME-01
**Plans:** 2/2 complete
- 10-01-PLAN.md — wireTabRenameConsumer, setting + toggle, i18n
- 10-02-PLAN.md — Gap closure: move toggle, export updateTerminalTabName, guard OSC

### Phase 10.1: Tab Renaming for Resume Dialog
**Goal:** Resume dialog displays saved tab names with accent color metadata
**Requirements:** TAB-RESUME-01
**Plans:** 1/1 complete
- 19-01-PLAN.md — Propagate tab names to session-names.json, fix metadata color

### Phase 11: Explorer Natural Sorting
**Goal:** Natural numeric file ordering with directories first and dotfiles prioritized
**Requirements:** EXPL-SORT-01
**Plans:** 1/1 complete
- 11-01-PLAN.md — Natural sort comparator, settings toggle, i18n

### Phase 12: .NET Dashboard Support
**Goal:** .NET projects see SDK-specific dashboard badge and framework stats
**Requirements:** DOTNET-01
**Plans:** 1/1 complete
- 12-01-PLAN.md — Dotnet project type plugin with one-level-deep detection

### Phase 13: Tab Mode Toggle Setting
**Goal:** Users can hide the Chat/Terminal mode-switch button on tabs
**Requirements:** TAB-MODE-01
**Plans:** 1/1 complete
- 13-01-PLAN.md — showTabModeToggle setting, toggle UI, CSS body-class hiding

### Phase 14: Resume Session Button
**Goal:** Visible lightbulb button in terminal toolbar to resume previous Claude sessions
**Requirements:** SESS-RESUME-01
**Plans:** 1/1 complete
- 14-01-PLAN.md — Resume session button HTML, CSS, click handler, i18n

### Phase 14.1: Resumed Session Tab Naming (INSERTED)
**Goal:** Thread saved session name to tab when resuming a Claude session
**Requirements:** SESS-RESUME-01, TAB-RESUME-01
**Plans:** 3/3 complete
- 14.1-01-PLAN.md — Thread displayTitle from resume dialog to tab creation
- 14.1-02-PLAN.md — Gap closure: add claudeSessionId to resumeSession termData
- 14.1-03-PLAN.md — Gap closure: widen isRenamed guard, explicit tab name after resume

### Phase 15: Remember Projects Width — DEFERRED
**Plans:** 0 (unplanned, deferred to next milestone)

### Phase 15.1: Remember Notification State — DEFERRED
**Plans:** 0 (unplanned, deferred to next milestone)

### Phase 16: Remember Tab Names
**Goal:** Tab names persist across app restarts
**Requirements:** TAB-PERSIST-01
**Plans:** 1/1 complete
- 16-01-PLAN.md — Add name to serialized tab, trigger save on name mutations

### Phase 17: Taskbar Pin Preservation
**Goal:** Fix Windows taskbar pin loss on auto-update
**Requirements:** PIN-01
**Plans:** 1/1 complete
- 17-01-PLAN.md — Set AUMID, disable directory change, guard shortcut deletion

### Phase 18: AI Tab Naming Toggle
**Goal:** Settings toggle to disable automatic AI tab name generation
**Requirements:** TAB-NAME-01
**Plans:** 1/1 complete
- 18-01-PLAN.md — aiTabNaming setting, guard call sites, Tabs settings group

### Phase 20: Bugfix — Swap Projects Selected Tab
**Goal:** Fix project switch always resetting to first tab
**Plans:** 1/1 complete
- 20-01-PLAN.md — In-memory per-project active tab tracking

### Phase 20.1: Auto-Scroll on Tab/Project Switch (INSERTED)
**Goal:** Auto-scroll xterm terminals to bottom on switch
**Plans:** 1/1 complete
- 20.1-01-PLAN.md — scrollToBottom in setActiveTerminal, settings toggle

### Phase 21: Integrated Markdown Viewer
**Goal:** Render markdown files as preview tabs with TOC, live reload, search
**Requirements:** MD-VIEW-01, MD-VIEW-02, MD-VIEW-03
**Plans:** 2/2 complete
- 21-01-PLAN.md — Markdown rendering with TOC, toggle, code blocks, link gating
- 21-02-PLAN.md — File watcher for live reload, Ctrl+F search, double-click-to-editor

### Phase 22: Explorer File Watcher
**Goal:** File explorer auto-reflects external filesystem changes via chokidar
**Requirements:** EXPL-WATCH-01
**Plans:** 4/4 complete
- 22-01-PLAN.md — Chokidar watcher in main process with IPC
- 22-02-PLAN.md — Wire to FileExplorer incremental patches
- 22-03-PLAN.md — Gap closure: fix persistent/EPERM crashes on Windows
- 22-04-PLAN.md — Gap closure: per-directory shallow watchers for performance

### Phase 23: Remember Last Active Tab on Close
**Goal:** Closing a tab switches to previously-active tab (browser-like behavior)
**Plans:** 1/1 complete
- 23-01-PLAN.md — Per-project tabActivationHistory Map with neighbor fallback

### Phase 24: Shift+Return Race Condition
**Goal:** Fix Shift+Return randomly submitting instead of inserting newline
**Plans:** 1/1 complete
- 24-01-PLAN.md — Track Shift key state independently, reduce line-height

## Quick Tasks

| # | Description | Commit |
|---|-------------|--------|
| 1 | Shift+Return multiline in claude-terminals | 2f2ae0b |
| 2 | Ctrl+Backspace word-delete | fe7de79 |
| 3 | Fix context menu disappearing + toggle setting | 57671a2 |
| 4 | Middle-click tab close | e39dfc7 |

## Progress Summary

| Phase | Plans | Status |
|-------|-------|--------|
| 1. Dotfile Visibility | 1/1 | Complete |
| 1.1 Dotfile Toggle | 1/1 | Complete |
| 2. Terminal Shortcuts | 3/3 | Complete |
| 2.1 PR #13 Fixes | 2/2 | Complete |
| 3. New Terminal Button | 1/1 | Complete |
| 4. Session Persistence | 2/2 | Complete |
| 5. Explorer State | 2/2 | Complete |
| 5.1 Explorer Cold-Start | 2/2 | Complete |
| 6. Claude Resume | 3/3 | Complete |
| 6.1 Session ID /clear | 1/1 | Complete |
| 6.2 Scroll to End | 2/2 | Complete |
| 6.3 Active Tab | 1/1 | Complete |
| 6.4 Session ID Persist | 2/2 | Complete |
| 7. Hotkey Settings | 2/2 | Complete |
| 7.1 Toggle CSS Fix | 1/1 | Complete |
| 8. App Title | 1/1 | Complete |
| 9. Window State | 1/1 | Complete |
| 10. Tab Renaming | 2/2 | Complete |
| 10.1 Resume Dialog Names | 1/1 | Complete |
| 11. Natural Sorting | 1/1 | Complete |
| 12. .NET Dashboard | 1/1 | Complete |
| 13. Tab Mode Toggle | 1/1 | Complete |
| 14. Resume Button | 1/1 | Complete |
| 14.1 Resume Tab Naming | 3/3 | Complete |
| 15. Projects Width | — | Deferred |
| 15.1 Notification State | — | Deferred |
| 16. Tab Name Persist | 1/1 | Complete |
| 17. Taskbar Pin | 1/1 | Complete |
| 18. AI Naming Toggle | 1/1 | Complete |
| 20. Swap Projects Tab | 1/1 | Complete |
| 20.1 Auto-Scroll | 1/1 | Complete |
| 21. Markdown Viewer | 2/2 | Complete |
| 22. File Watcher | 4/4 | Complete |
| 23. Last Active Tab | 1/1 | Complete |
| 24. Shift+Return Fix | 1/1 | Complete |

---
*Archived: 2026-02-27*
