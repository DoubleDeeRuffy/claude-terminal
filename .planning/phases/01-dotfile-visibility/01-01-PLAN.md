---
phase: 01-dotfile-visibility
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/renderer/ui/components/FileExplorer.js
autonomous: true
requirements:
  - FILE-01
  - FILE-02

must_haves:
  truths:
    - "Dotfolders (.planning, .claude, .github, .husky, etc.) appear in the file explorer tree when expanding a project root"
    - "Dotfiles (.eslintrc, .prettierrc, etc.) appear in the file explorer tree alongside regular files"
    - "Dotfiles and dotfolders appear in Ctrl+P file search results"
    - "Entries in IGNORE_PATTERNS (.git, node_modules, .DS_Store, .env.local, etc.) remain hidden in both tree and search"
    - "Non-dot files and folders that were visible before continue to display correctly"
  artifacts:
    - path: "src/renderer/ui/components/FileExplorer.js"
      provides: "File explorer tree and search without dotfile blanket filter"
      contains: "IGNORE_PATTERNS"
  key_links:
    - from: "readDirectoryAsync"
      to: "tree view rendering"
      via: "returns entries array fed to buildTree"
      pattern: "IGNORE_PATTERNS\\.has\\(name\\)"
    - from: "collectAllFiles"
      to: "performSearch results"
      via: "returns file list fed to search filter"
      pattern: "IGNORE_PATTERNS\\.has\\(name\\)"
---

<objective>
Remove the blanket dotfile filter from both code paths in FileExplorer.js so that all hidden files and folders (except those in the IGNORE_PATTERNS blocklist) appear in the file explorer tree and Ctrl+P search.

Purpose: Users currently cannot see project-relevant dotfolders like .planning, .claude, and .github in the file explorer. The blanket `name.startsWith('.')` filter hides them. Removing this filter satisfies FILE-01 (tree visibility) and FILE-02 (search visibility) in a single surgical edit.

Output: Modified FileExplorer.js with both dotfile filter lines removed.
</objective>

<execution_context>
@C:/Users/uhgde/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/uhgde/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-dotfile-visibility/01-RESEARCH.md
@src/renderer/ui/components/FileExplorer.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove dotfile filter from readDirectoryAsync and collectAllFiles</name>
  <files>src/renderer/ui/components/FileExplorer.js</files>
  <action>
Remove the dotfile filter line from both functions in FileExplorer.js:

1. In `readDirectoryAsync` (line 233), delete the entire line:
   `if (name.startsWith('.') && name !== '.env' && name !== '.gitignore') continue;`

2. In `collectAllFiles` (line 370), delete the identical line:
   `if (name.startsWith('.') && name !== '.env' && name !== '.gitignore') continue;`

Do NOT modify the `IGNORE_PATTERNS` set or the `IGNORE_PATTERNS.has(name)` checks. Those must remain unchanged — they handle the entries that should stay hidden (.git, node_modules, .DS_Store, .env.local, etc.).

Do NOT add any replacement filter, toggle, or settings flag. The user explicitly chose "show all" — no toggle is needed (Out of Scope per REQUIREMENTS.md).

After removal, the loop structure in both functions should be:
```javascript
for (const name of names) {
  if (IGNORE_PATTERNS.has(name)) continue;
  // next line of existing logic (no dotfile filter)
```
  </action>
  <verify>
    <automated>cd C:/Users/uhgde/source/repos/claude-terminal && node -e "const fs=require('fs'); const c=fs.readFileSync('src/renderer/ui/components/FileExplorer.js','utf8'); const matches=c.match(/name\.startsWith\('\\.'\)/g); if(matches){console.log('FAIL: found',matches.length,'dotfile filter(s)');process.exit(1)}else{console.log('PASS: no dotfile filters found')}"</automated>
    <manual>Verify that IGNORE_PATTERNS.has(name) lines are still present (should find 2 occurrences)</manual>
  </verify>
  <done>Both dotfile filter lines removed. IGNORE_PATTERNS checks remain intact. No other changes to FileExplorer.js.</done>
</task>

<task type="auto">
  <name>Task 2: Rebuild renderer bundle and run tests</name>
  <files>dist/renderer.bundle.js</files>
  <action>
1. Run `npm run build:renderer` to rebuild the renderer bundle with the FileExplorer.js change.
2. Run `npm test` to verify no existing tests break.

The build must succeed without errors. If tests fail, investigate whether the failure is related to the dotfile filter removal (it should not be — no test mocks the dotfile filter).
  </action>
  <verify>
    <automated>cd C:/Users/uhgde/source/repos/claude-terminal && npm run build:renderer 2>&1 | tail -5 && npm test 2>&1 | tail -10</automated>
  </verify>
  <done>Renderer bundle rebuilt successfully. All existing tests pass.</done>
</task>

</tasks>

<verification>
1. No occurrences of `name.startsWith('.')` remain in FileExplorer.js (verified by grep)
2. Exactly 2 occurrences of `IGNORE_PATTERNS.has(name)` remain in FileExplorer.js (unchanged)
3. `npm run build:renderer` succeeds
4. `npm test` passes
</verification>

<success_criteria>
- FILE-01: The `readDirectoryAsync` function no longer filters dotfiles, so dotfolders like .planning, .claude, .github will appear in the tree view
- FILE-02: The `collectAllFiles` function no longer filters dotfiles, so dotfiles will appear in Ctrl+P search results
- IGNORE_PATTERNS entries (.git, node_modules, .DS_Store, etc.) remain hidden in both tree and search
- Renderer bundle builds without errors
- All tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/01-dotfile-visibility/01-01-SUMMARY.md`
</output>
