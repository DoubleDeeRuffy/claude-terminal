---
status: diagnosed
phase: 14.1-resumed-session-tab-naming
source: [14.1-01-SUMMARY.md, 14.1-02-SUMMARY.md]
started: 2026-02-27T16:10:00Z
updated: 2026-02-27T16:30:00Z
---

## Current Test

[testing complete]

## Tests

### 1. Resume renamed session (terminal mode)
expected: Open the resume dialog, click a session card that has a custom name (accent-colored title). The new terminal tab should immediately show that session's saved name — not "Resume...".
result: issue
reported: "Resuming... stays there forever"
severity: major

### 2. Resume un-renamed session (terminal mode)
expected: Open the resume dialog, click a session card that does NOT have a custom name. The new terminal tab should show "Resume..." as interim text, then eventually get a name from the haiku AI namer.
result: issue
reported: "same issue like test 1, Resuming... forever"
severity: major

### 3. Resume renamed session (chat mode)
expected: Switch to chat mode, open the resume dialog, click a session card with a custom name. The new chat tab should display the session's saved name.
result: skipped
reason: User skipped

## Summary

total: 3
passed: 0
issues: 2
pending: 0
skipped: 1

## Gaps

- truth: "When user clicks a session card with a custom name, the new tab immediately displays that session's saved name"
  status: failed
  reason: "User reported: Resuming... stays there forever"
  severity: major
  test: 1
  root_cause: "Three issues: (1) Bundle is stale — dist/renderer.bundle.js was not rebuilt after Plan 01+02 merged, so the running app has none of the fixes. (2) isRenamed condition at line 2889 is too narrow — AI-haiku named sessions have isRenamed=false so sessionName is always null for them. (3) After --resume, Claude CLI returns to ready state without emitting a new task name OSC sequence, so updateTerminalTabName() is never called and tab stays at Resuming..."
  artifacts:
    - path: "src/renderer/ui/components/TerminalManager.js"
      issue: "line 2889: session?.isRenamed && session?.displayTitle is too narrow — misses AI-named sessions"
    - path: "src/renderer/ui/components/TerminalManager.js"
      issue: "resumeSession() relies on OSC title to update tab, but --resume doesn't emit new task name"
    - path: "dist/renderer.bundle.js"
      issue: "Stale — missing Plan 01 and Plan 02 changes (line 44827 still has old signature)"
  missing:
    - "Rebuild renderer bundle (npm run build:renderer)"
    - "Widen isRenamed condition: use session?.displayTitle instead of session?.isRenamed && session?.displayTitle"
    - "After addTerminal() in resumeSession(), explicitly call updateTerminalTabName() if sessionName is known — don't rely on OSC"
  debug_session: ""

- truth: "When user clicks a session card without a custom name, the tab shows Resume... then eventually gets a haiku AI name"
  status: failed
  reason: "User reported: same issue like test 1, Resuming... forever"
  severity: major
  test: 2
  root_cause: "Same three root causes as Test 1. Additionally for un-renamed sessions: even with fixes applied, --resume sessions return to ready state (OSC title 'Claude Code') without emitting a distinct task name, so updateTerminalTabName() is never triggered. The haiku AI namer only fires on new session start, not resume."
  artifacts:
    - path: "src/renderer/ui/components/TerminalManager.js"
      issue: "handleClaudeTitleChange filters out 'Claude Code' title at parseClaudeTitle line 338"
    - path: "src/renderer/ui/components/TerminalManager.js"
      issue: "resumeSession() has no fallback to trigger name update when OSC doesn't fire"
  missing:
    - "After resume, if no OSC task name arrives, look up session-names.json or trigger haiku namer as fallback"
  debug_session: ""
